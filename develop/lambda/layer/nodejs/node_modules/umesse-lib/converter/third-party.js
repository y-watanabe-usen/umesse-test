const fs = require('fs')
const { execSync } = require("child_process");
//const ffmpeg = require('fluent-ffmpeg');

module.exports = function (proto) {
  //  ffmpeg.setFfmpegPath('./bin/ffmpeg');
  //  ffmpeg.setFfprobePath('./bin/ffprobe');

  proto.getDuration = function (inputPath) {
    return new Promise((resolve, reject) => {
      ffmpeg(inputPath)
        .ffprobe(0, (err, data) => {
          if (err) return reject(err);
          resolve(data.format.duration)
        });
    })
  }
  proto.generateCm = function (inputs, output) {
  }
  // 1. wav変換
  proto.toWav = function (input, output) {
  }

  // 2. ラウドネス値取得
  //  getLoudnorm(input, { I: "-12.0", LRA: "+10.0", tp="-2.0" })
  proto.getLoudnorm = function (input, params = { I: "-24.0", LRA: "+20.0", tp: "-2.0" }) {

  }
}