'use strict';

var UMesseConverter = function (unisCustomerCd, cmId) {
    this.ffmpeg = `ffmpeg -hide_banner`;
    this.workDir = `/tmp/${unisCustomerCd}/mix/${cmId}`;
    this.windowsWorkDir = `${process.cwd()}\\tmp\\${unisCustomerCd}\\mix\\${cmId}`; // windows only

    const isWindows = process.platform === 'win32';
    const isLocal = process.env.environment === 'local';
    this.isLocalWindows = isLocal && isWindows;

    if (this.isLocalWindows)
        require('./win-processor.js')(UMesseConverter.prototype);
    else
        require('./processor.js')(UMesseConverter.prototype);
    
    //require('./third-party')(UMesseConverter.prototype);

}
UMesseConverter.prototype.getWorkDir = function () {
    return this.workDir;
}
module.exports = UMesseConverter