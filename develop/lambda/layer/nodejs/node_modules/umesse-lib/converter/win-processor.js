
'use strict';

const fs = require('fs')
const { debuglog } = require('../constants')
const { execSync } = require("child_process");

module.exports = function (proto) {

  function winExecSync(command) {
    fs.writeFileSync(`${this.windowsWorkDir}/ffmped-command`, `#!/bin/bash\n${command}`);
    command = `docker run --name ffmpeg-runner --rm \
          -v ${process.cwd()}\\..\\layer\\bin:/usr/local/bin \
          -v ${this.windowsWorkDir}:${this.workDir} \
          centos:latest \
          sh ${this.workDir}/ffmped-command`;
    return execSync(command);
  }
  proto.init = function () {
    const initDirCommand = `mkdir ${windowsWorkDir} > NUL 2>&1 && \
          if ERRORLEVEL 1 cmd /c exit 0 && \
          rd /q ${windowsWorkDir}\\*`;
    execSync(initDirCommand);
  }
  proto.generateCm = async function (inputs, output) {
  }
  proto.getDuration = function (input) {
  }

}